Datos_contraparte_nacional As screen:
    Fill: =RGBA(235, 238, 251, 1)
    OnVisible: |-
        =UpdateContext({popup_faltarut:false});
        UpdateContext({sin_nombre_representante_legal_na:false});
        UpdateContext({sin_nombre_responsable_institucional_na:false});
        UpdateContext({sin_cargo_na:false});
        UpdateContext({sin_firma_na:false});
        UpdateContext({correo_na_invalido:false});
        UpdateContext({correo_na_vacio:false});
        UpdateContext({popup_institucionnoencontrada:false});
        UpdateContext({hide_border_correo_na:true});
        Reset(inp_contraparte_na_popup_search);
        UpdateContext({cambio_detectado:false});
        Set(tab_seleccionada, 1);
        UpdateContext({mostrar_lista_persona_juridica:false});
        UpdateContext({popup_eliminar_contraparte_na:false});
        UpdateContext({error_minimo_caracteres:false});

    Botones_atras_siguiente_3 As groupContainer.manualLayoutContainer:
        Height: =44
        Width: =1286
        X: =40
        Y: =696
        ZIndex: =1

        Siguiente_3 As button:
            BorderThickness: =1
            Fill: =RGBA(247, 158, 64, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.4)
            OnSelect: =
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(249, 133, 11, 1)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =1
            Text: ="SIGUIENTE"
            Visible: =false
            X: =1124
            Y: =2
            ZIndex: =1

        Eliminar As button:
            BorderColor: =RGBA(238, 110, 126, 1)
            Color: =RGBA(238, 110, 126, 1)
            DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
            Fill: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(238, 110, 126, 1)
            HoverColor: =RGBA(238, 110, 126, 1)
            HoverFill: =RGBA(238, 110, 126, 0.1)
            OnSelect: |-
                =UpdateContext({popup_eliminar_contraparte_na:true});
                /*'Convenio-PAEliminarcontraparteregistrada'.Run(
                    "NACIONAL";
                    contraparte.id
                );;
                Remove(
                    contrapartes_nacionales;
                    First(
                        Filter(
                            contrapartes_nacionales;
                            Lower(nombre_entidad_contraparte) = Lower(nombre_unidad_contraparte_na_input.Text)
                        )
                    )
                );;
                Remove(
                    id_contrapartes_nacionales;
                    First(
                        Filter(
                            id_contrapartes_nacionales;
                            Lower(ID) = Lower(contraparte.id)
                        )
                    )
                );;
                'Convenio-PAActualizaridlistasSharePointasociadas'.Run(
                    JSON(id_contrapartes_nacionales);
                    "contraparte nacional";
                    id_convenio
                );;
                //Back(ScreenTransition.CoverRight);;
                Navigate(Entidad_contraparte; ScreenTransition.Fade);;*/
            PressedBorderColor: =RGBA(238, 110, 126, 1)
            PressedColor: =RGBA(238, 110, 126, 1)
            PressedFill: =RGBA(238, 110, 126, 0.3)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =-1
            Text: ="ELIMINAR"
            Visible: =If(nueva_contraparte,false,true)
            X: =936
            Y: =2
            ZIndex: =2

        Atrás_3 As button:
            BorderColor: =RGBA(247, 158, 64, 1)
            Color: =RGBA(247, 158, 64, 1)
            Fill: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.1)
            OnSelect: =Navigate(Entidad_contraparte,ScreenTransition.Fade)
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(247, 158, 64, 1)
            PressedFill: =RGBA(247, 158, 64, 0.3)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =
            Text: ="ATRÁS"
            X: =2
            Y: =2
            ZIndex: =3

        Guardar As button:
            DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
            Fill: =RGBA(247, 158, 64, 1)
            FontWeight: =FontWeight.Normal
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.4)
            OnSelect: |-
                =//REPRESENTANTE LEGAL
                If(CountRows(Split(Trim(nombre_representante_legal_na_input.Text),""))=0, 
                        UpdateContext({sin_nombre_representante_legal_na:true}), 
                        UpdateContext({sin_nombre_representante_legal_na:false}));
                
                //RESPONSABLE INSTITUCIONAL
                If(CountRows(Split(Trim(nombre_responsable_institucional_na_input.Text),""))=0, 
                        UpdateContext({sin_nombre_responsable_institucional_na:true}), 
                        UpdateContext({sin_nombre_responsable_institucional_na:false}));
                
                If(CountRows(Split(Trim(cargo_responsable_institucional_na_input.Text),""))=0, 
                        UpdateContext({sin_cargo_na:true}), 
                        UpdateContext({sin_cargo_na:false}));
                
                If((IsMatch(TrimEnds(Lower(correo_electronico_na_input.Text)),
                "^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$") = false),
                        UpdateContext({correo_na_invalido:true}),
                        UpdateContext({correo_na_invalido:false}) );
                If(IsBlank(correo_electronico_na_input.Text),
                    UpdateContext({correo_na_vacio:true}),
                    UpdateContext({correo_na_vacio:false}));
                
                //firma digital
                If(IsBlank(firma_digiral_na_button),UpdateContext({sin_firma_na:true}),UpdateContext({sin_firma_na:false}));
                
                If(!sin_nombre_representante_legal_na && !sin_nombre_responsable_institucional_na && !sin_cargo_na && !sin_firma_na && !correo_na_invalido && !correo_na_vacio,
                    If(IsBlank(
                            LookUp(
                                contrapartes_nacionales, 
                                Lower(nombre_entidad_contraparte) = Lower(nombre_unidad_contraparte_na_input.Text)
                            )
                        ),
                        If(cambio_detectado,
                        Set(cargando, true);
                        If(id_estado=1,Set(id_estado,2));//pasa a contraparte registrada
                        Set(nueva_contraparte_nacional,
                        'Convenio-PAGuardarcontrapartenacionalregistrada'.Run(
                                                    nombre_unidad_contraparte_na_input.Text,
                                                    contraparte_na.rut_entidad_contraparte,
                                                    contraparte_na.dv_entidad_contraparte,
                                                    Upper(nombre_representante_legal_na_input.Text),
                                                    Upper(nombre_responsable_institucional_na_input.Text),
                                                    Upper(cargo_responsable_institucional_na_input.Text),
                                                    Upper(correo_electronico_na_input.Text),
                                                    publica_na_input.Text,
                                                    //tipo_empresa_na_input.Text;
                                                    //comuna_na_input.Text;
                                                    //tipo_contribuyente_na_input.Text;
                                                    //rubro_na_input.Text;
                                                    //actividad_na_input.Text;
                                                    firma_digiral_na_button.Selected.Value,
                                                    id_convenio,
                                                    id_estado
                        ));
                        Set(id_estado,nueva_contraparte_nacional.id_estado);
                        Collect(contrapartes_nacionales,{
                            nombre_entidad_contraparte: nombre_unidad_contraparte_na_input.Text,
                            rut_entidad_contraparte: contraparte_na.rut_entidad_contraparte,
                            dv_entidad_contraparte: contraparte_na.dv_entidad_contraparte,
                            nombre_representante_legal: Upper(nombre_representante_legal_na_input.Text),
                            nombre_responsable_institucional: Upper(nombre_responsable_institucional_na_input.Text),
                            cargo_responsable_institucional: Upper(cargo_responsable_institucional_na_input.Text),
                            correo_responsable_institucional: Upper(correo_electronico_na_input.Text),
                            publica: publica_na_input.Text,
                            //tipo_empresa: tipo_empresa_na_input.Text;
                            //comuna: comuna_na_input.Text;
                            //tipo_contribuyente: tipo_contribuyente_na_input.Text;
                            //rubro: rubro_na_input.Text;
                            //actividad: actividad_na_input.Text;
                            firma_digital: firma_digiral_na_button.Selected.Value,
                            id: nueva_contraparte_nacional.id_contraparte
                        });
                        Collect(id_contrapartes_nacionales,{
                            ID: nueva_contraparte_nacional.id_contraparte
                        });
                        'Convenio-PAActualizaridlistasSharePointasociadas'.Run(
                            JSON(id_contrapartes_nacionales),
                            "contraparte nacional",
                            id_convenio
                        );
                        Set(guardado,true);
                        Set(cargando, false)
                        );
                        ,
                        If(cambio_detectado,
                        
                        If(!nueva_contraparte,
                        Set(cargando, true);
                        'Convenio-PAEditarcontraparteregistrada'.Run(
                                 nombre_unidad_contraparte_na_input.Text,
                                 Upper(nombre_representante_legal_na_input.Text),
                                 Upper(nombre_responsable_institucional_na_input.Text),
                                 Upper(cargo_responsable_institucional_na_input.Text),
                                 Upper(correo_electronico_na_input.Text),
                                 firma_digiral_na_button.Selected.Value,
                                 "NACIONAL",
                                 contraparte.id
                        );
                        Patch(contrapartes_nacionales,
                            LookUp(
                                contrapartes_nacionales, 
                                Lower(nombre_entidad_contraparte) = Lower(nombre_unidad_contraparte_na_input.Text)
                            ),
                            {
                                nombre_entidad_contraparte: nombre_unidad_contraparte_na_input.Text,
                                nombre_representante_legal: Upper(nombre_representante_legal_na_input.Text),
                                nombre_responsable_institucional: Upper(nombre_responsable_institucional_na_input.Text),
                                cargo_responsable_institucional: Upper(cargo_responsable_institucional_na_input.Text),
                                correo_responsable_institucional: Upper(correo_electronico_na_input.Text),
                                firma_digital: firma_digiral_na_button.Selected.Value
                            }
                        );
                        Set(guardado,true);
                        Set(cargando, false))
                        )
                    );
                    Navigate(Entidad_contraparte, ScreenTransition.Fade);
                );
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(249, 133, 11, 1)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =-1
            Text: ="GUARDAR"
            X: =1124
            Y: =2
            ZIndex: =4

    Datos_entidad_contraparte_na As groupContainer.manualLayoutContainer:
        Height: =584
        Width: =1366
        Y: =96
        ZIndex: =2

        Contenedor_d_e_c_na As groupContainer.manualLayoutContainer:
            Height: =488
            Width: =1282
            X: =42
            Y: =96
            ZIndex: =1

            fondo_blanco_6 As image:
                Height: =488
                Image: ='background-section'
                ImagePosition: =ImagePosition.Fill
                RadiusBottomLeft: =24
                RadiusBottomRight: =24
                RadiusTopLeft: =24
                RadiusTopRight: =24
                Width: =1282
                ZIndex: =1

            Promotor_unidad_solicitante_na As groupContainer.manualLayoutContainer:
                Height: =70
                Width: =1198
                X: =42
                Y: =276
                ZIndex: =2

                correo_electronico_na As groupContainer.manualLayoutContainer:
                    Height: =60
                    Width: =300
                    X: =898
                    ZIndex: =1

                    sin_correo_na As text:
                        BorderColor: =RGBA(238, 110, 126, 1)
                        BorderThickness: =4
                        Default: =""
                        DisabledBorderColor: =RGBA(238, 110, 126, 1)
                        DisabledFill: =RGBA(0, 0, 0, 0)
                        DisplayMode: =DisplayMode.Disabled
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =correo_electronico_na_input.Height
                        HoverBorderColor: =RGBA(238, 110, 126, 1)
                        HoverFill: =RGBA(0, 0, 0, 0)
                        RadiusBottomLeft: =13
                        RadiusBottomRight: =13
                        RadiusTopLeft: =13
                        RadiusTopRight: =13
                        TabIndex: =-1
                        Visible: |-
                            =/*If((IsMatch(TrimEnds(Lower(correo_electronico_na_input.Text));
                            "^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$") = false) && correo_na_vacio
                            ;true;false)
                            */
                            If(((IsMatch(TrimEnds(Lower(correo_electronico_na_input.Text)),
                            "^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$") = false) && correo_na_invalido) || (IsBlank(correo_electronico_na_input.Text) && correo_na_vacio)
                            ,true,false)
                        Width: =correo_electronico_na_input.Width
                        X: =2
                        Y: =correo_electronico_na_input.Y
                        ZIndex: =1

                    correo_electronico_na_input As text:
                        BorderColor: =RGBA(255, 0, 0, 1)
                        BorderThickness: =0
                        Color: =RGBA(17, 61, 107, 1)
                        Default: =If(nueva_contraparte,contraparte_na.correo_responsable_institucional,contraparte.correo_responsable_institucional)
                        DisabledColor: =RGBA(111, 139, 167, 1)
                        DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
                        Fill: =RGBA(241, 244, 255, 1)
                        FocusedBorderThickness: =0
                        Height: =38
                        HintText: =""
                        HoverBorderColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =RGBA(241, 244, 255, 1)
                        MaxLength: =60
                        OnChange: |-
                            =UpdateContext({hide_border_correo_na:false});
                            UpdateContext({cambio_detectado:true})
                        PaddingBottom: =12
                        PaddingLeft: =24
                        PaddingRight: =24
                        PaddingTop: =12
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =14
                        TabIndex: =
                        Width: =290
                        X: =2
                        Y: =19
                        ZIndex: =2

                    correo_electronico_na_label As label:
                        Color: =RGBA(111, 139, 167, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =20
                        PaddingBottom: =4
                        PaddingLeft: =12
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =10
                        Text: ="CORREO ELECTRÓNICO*"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =230
                        ZIndex: =3

                Cargo_responsable_institucional_na As groupContainer.manualLayoutContainer:
                    Height: =67
                    Width: =432
                    X: =449
                    ZIndex: =3

                    sin_cargo As text:
                        BorderColor: =RGBA(238, 110, 126, 1)
                        Default: =""
                        DisabledBorderColor: =RGBA(238, 110, 126, 1)
                        DisabledFill: =RGBA(0, 0, 0, 0)
                        DisplayMode: =DisplayMode.Disabled
                        Fill: =RGBA(0, 0, 0, 0)
                        HoverBorderColor: =RGBA(238, 110, 126, 1)
                        HoverFill: =RGBA(0, 0, 0, 0)
                        PaddingLeft: =5
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        TabIndex: =-1
                        Visible: =If(CountRows(Split(Trim(cargo_responsable_institucional_na_input.Text),""))=0 && sin_cargo_na,true,false)
                        Width: =424
                        X: =2
                        Y: =20
                        ZIndex: =1

                    cargo_responsable_institucional_na_input As text:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        BorderThickness: =0
                        Color: =RGBA(17, 61, 107, 1)
                        Default: =If(nueva_contraparte,contraparte_na.cargo_responsable_institucional,contraparte.cargo_responsable_institucional)
                        DisabledColor: =RGBA(111, 139, 167, 1)
                        DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
                        Fill: =RGBA(241, 244, 255, 1)
                        FocusedBorderThickness: =0
                        Height: =37
                        HintText: =""
                        HoverBorderColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =RGBA(241, 244, 255, 1)
                        MaxLength: =60
                        OnChange: |-
                            =UpdateContext({cambio_detectado:true})
                        PaddingBottom: =12
                        PaddingLeft: =24
                        PaddingRight: =24
                        PaddingTop: =12
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =14
                        TabIndex: =
                        Width: =422
                        X: =3
                        Y: =21
                        ZIndex: =2

                    cargo_responsable_institucional_na_label As label:
                        Color: =RGBA(111, 139, 167, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =20
                        PaddingBottom: =4
                        PaddingLeft: =12
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =10
                        Text: ="CARGO*"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =230
                        ZIndex: =3

                Nombre_responsable_institucional_na As groupContainer.manualLayoutContainer:
                    Height: =67
                    Width: =432
                    ZIndex: =4

                    sin_nombre_responsable_institucional As text:
                        BorderColor: =RGBA(238, 110, 126, 1)
                        Default: =""
                        DisabledBorderColor: =RGBA(238, 110, 126, 1)
                        DisabledFill: =RGBA(0, 0, 0, 0)
                        DisplayMode: =DisplayMode.Disabled
                        Fill: =RGBA(0, 0, 0, 0)
                        HoverBorderColor: =RGBA(238, 110, 126, 1)
                        HoverFill: =RGBA(0, 0, 0, 0)
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        TabIndex: =-1
                        Visible: =If(CountRows(Split(Trim(nombre_responsable_institucional_na_input.Text),""))=0 && sin_nombre_responsable_institucional_na,true,false)
                        Width: =424
                        X: =2
                        Y: =20
                        ZIndex: =1

                    nombre_responsable_institucional_na_input As text:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        BorderThickness: =0
                        Color: =RGBA(17, 61, 107, 1)
                        Default: =If(nueva_contraparte,contraparte_na.nombre_responsable_institucional,contraparte.nombre_responsable_institucional)
                        DisabledColor: =RGBA(111, 139, 167, 1)
                        DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
                        Fill: =RGBA(241, 244, 255, 1)
                        FocusedBorderThickness: =0
                        Height: =38
                        HintText: =""
                        HoverBorderColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =RGBA(241, 244, 255, 1)
                        MaxLength: =60
                        OnChange: |-
                            =UpdateContext({cambio_detectado:true})
                        PaddingBottom: =12
                        PaddingLeft: =24
                        PaddingRight: =24
                        PaddingTop: =12
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =14
                        TabIndex: =
                        Width: =422
                        X: =3
                        Y: =21
                        ZIndex: =2

                    nombre_responsable_institucional_na_label As label:
                        Color: =RGBA(111, 139, 167, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =20
                        PaddingBottom: =4
                        PaddingLeft: =12
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =10
                        Text: ="NOMBRE RESPONSABLE INSTITUCIONAL*"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =418
                        ZIndex: =3

            Firma_digiral_na As groupContainer.manualLayoutContainer:
                Height: =60
                Width: =300
                X: =942
                Y: =192
                ZIndex: =3

                sin_firma_na As text:
                    BorderColor: =RGBA(238, 110, 126, 1)
                    BorderThickness: =2.8
                    Default: =""
                    DisabledBorderColor: =RGBA(238, 110, 126, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    DisplayMode: =DisplayMode.Disabled
                    Fill: =RGBA(0, 0, 0, 0)
                    Height: =fondo_celeste_5.Height
                    HoverBorderColor: =RGBA(238, 110, 126, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    PaddingLeft: =5
                    RadiusBottomLeft: =13
                    RadiusBottomRight: =13
                    RadiusTopLeft: =13
                    RadiusTopRight: =13
                    TabIndex: =-1
                    Visible: =If(IsBlank(firma_digiral_na_button) && sin_firma_na,true,false)
                    Width: =170
                    X: =1
                    Y: =fondo_celeste_5.Y - 1
                    ZIndex: =1

                fondo_celeste_5 As image:
                    BorderColor: =RGBA(255, 255, 255, 1)
                    Height: =40
                    HoverFill: =RGBA(186, 202, 226, 1)
                    Image: ='background-input'
                    ImagePosition: =ImagePosition.Fill
                    RadiusBottomLeft: =12
                    RadiusBottomRight: =12
                    RadiusTopLeft: =12
                    RadiusTopRight: =12
                    Visible: =false
                    Width: =300
                    Y: =20
                    ZIndex: =2

                firma_digiral_na_label As label:
                    Color: =RGBA(111, 139, 167, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =20
                    PaddingBottom: =4
                    PaddingLeft: =12
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =10
                    Text: ="¿POSEE FIRMA ELECTRÓNICA AVANZADA?*"
                    VerticalAlign: =VerticalAlign.Top
                    Width: =300
                    ZIndex: =3

                firma_digiral_na_button As radio:
                    BorderColor: =RGBA(0, 0, 0, 0)
                    Color: =RGBA(17, 61, 107, 1)
                    Default: =If(nueva_contraparte,"",contraparte.firma_digital)
                    DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
                    Height: =40
                    HoverColor: =RGBA(17, 61, 107, 1)
                    Items: =["Sí","No"]
                    Layout: =Layout.Horizontal
                    OnChange: |-
                        =UpdateContext({cambio_detectado:true})
                    PaddingBottom: =0
                    PaddingTop: =5
                    RadioBackgroundFill: =RGBA(0, 0, 0, 0)
                    RadioBorderColor: =RGBA(17, 61, 107, 1)
                    RadioSelectionFill: =RGBA(17, 61, 107, 1)
                    RadioSize: =30
                    Width: =300
                    Y: =20
                    ZIndex: =4

            Nombre_representante_legal_na As groupContainer.manualLayoutContainer:
                Height: =70
                Width: =880
                X: =42
                Y: =192
                ZIndex: =4

                sin_nombre_representante_legal As text:
                    BorderColor: =RGBA(238, 110, 126, 1)
                    Default: =""
                    DisabledBorderColor: =RGBA(238, 110, 126, 1)
                    DisabledFill: =RGBA(0, 0, 0, 0)
                    DisplayMode: =DisplayMode.Disabled
                    Fill: =RGBA(0, 0, 0, 0)
                    Height: =43
                    HoverBorderColor: =RGBA(238, 110, 126, 1)
                    HoverFill: =RGBA(0, 0, 0, 0)
                    PaddingLeft: =5
                    RadiusBottomLeft: =12
                    RadiusBottomRight: =12
                    RadiusTopLeft: =12
                    RadiusTopRight: =12
                    TabIndex: =-1
                    Visible: =If(CountRows(Split(Trim(nombre_representante_legal_na_input.Text),""))=0 && sin_nombre_representante_legal_na ,true,false)
                    Width: =872
                    X: =2
                    Y: =22
                    ZIndex: =1

                nombre_representante_legal_na_input As text:
                    BorderColor: =RGBA(255, 0, 0, 1)
                    BorderThickness: =0
                    Color: =RGBA(17, 61, 107, 1)
                    Default: =If(nueva_contraparte,contraparte_na.nombre_representante_legal,contraparte.nombre_representante_legal)
                    DisabledColor: =RGBA(111, 139, 167, 1)
                    DisplayMode: =If(id_estado=13,DisplayMode.Disabled,DisplayMode.Edit)
                    Fill: =RGBA(241, 244, 255, 1)
                    FocusedBorderThickness: =0
                    HintText: =""
                    HoverBorderColor: =RGBA(255, 255, 255, 1)
                    HoverFill: =RGBA(241, 244, 255, 1)
                    MaxLength: =60
                    OnChange: |-
                        =UpdateContext({cambio_detectado:true})
                    PaddingBottom: =12
                    PaddingLeft: =24
                    PaddingRight: =24
                    PaddingTop: =12
                    RadiusBottomLeft: =12
                    RadiusBottomRight: =12
                    RadiusTopLeft: =12
                    RadiusTopRight: =12
                    Size: =14
                    TabIndex: =
                    Width: =867
                    X: =5
                    Y: =23
                    ZIndex: =2

                nombre_representante_legal_na_label As label:
                    Color: =RGBA(111, 139, 167, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =20
                    PaddingBottom: =4
                    PaddingLeft: =12
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =10
                    Text: ="NOMBRE REPRESENTANTE LEGAL*"
                    VerticalAlign: =VerticalAlign.Top
                    Width: =300
                    ZIndex: =3

            Extra_na As groupContainer.manualLayoutContainer:
                Height: =70
                Width: =1200
                X: =42
                Y: =108
                ZIndex: =5

                Pública_na As groupContainer.manualLayoutContainer:
                    Height: =60
                    Width: =90
                    X: =188
                    ZIndex: =7

                    publica_na_input As text:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        BorderThickness: =0
                        Color: =RGBA(17, 61, 107, 1)
                        Default: =If(nueva_contraparte,contraparte_na.publica,contraparte.publica)
                        DisabledColor: =RGBA(111, 139, 167, 1)
                        DisplayMode: =DisplayMode.Disabled
                        Fill: =RGBA(241, 244, 255, 1)
                        FocusedBorderThickness: =0
                        HintText: =""
                        HoverBorderColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =RGBA(241, 244, 255, 1)
                        MaxLength: =60
                        PaddingBottom: =12
                        PaddingLeft: =24
                        PaddingRight: =24
                        PaddingTop: =12
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =14
                        TabIndex: =
                        Width: =90
                        Y: =20
                        ZIndex: =1

                    publica_na_label As label:
                        Color: =RGBA(111, 139, 167, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =20
                        PaddingBottom: =4
                        PaddingLeft: =12
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =10
                        Text: ="PÚBLICA"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =90
                        ZIndex: =2

                Rut_na As groupContainer.manualLayoutContainer:
                    Height: =60
                    Width: =160
                    ZIndex: =8

                    rut_na_input As text:
                        BorderColor: =RGBA(255, 255, 255, 1)
                        BorderThickness: =0
                        Color: =RGBA(17, 61, 107, 1)
                        Default: =If(nueva_contraparte,Concatenate(contraparte_na.rut_entidad_contraparte,"-",contraparte_na.dv_entidad_contraparte),Concatenate(contraparte.rut_entidad_contraparte,"-",contraparte.dv_entidad_contraparte))
                        DisabledColor: =RGBA(111, 139, 167, 1)
                        DisplayMode: =DisplayMode.Disabled
                        Fill: =RGBA(241, 244, 255, 1)
                        FocusedBorderThickness: =0
                        HintText: =""
                        HoverBorderColor: =RGBA(255, 255, 255, 1)
                        HoverFill: =RGBA(241, 244, 255, 1)
                        MaxLength: =60
                        PaddingBottom: =12
                        PaddingLeft: =24
                        PaddingRight: =24
                        PaddingTop: =12
                        RadiusBottomLeft: =12
                        RadiusBottomRight: =12
                        RadiusTopLeft: =12
                        RadiusTopRight: =12
                        Size: =14
                        TabIndex: =
                        Width: =160
                        Y: =20
                        ZIndex: =1

                    rut_na_label As label:
                        Color: =RGBA(111, 139, 167, 1)
                        FontWeight: =FontWeight.Bold
                        Height: =20
                        PaddingBottom: =4
                        PaddingLeft: =12
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =10
                        Text: ="RUT"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =160
                        ZIndex: =2

            Nombre_unidad_contraparte_na As groupContainer.manualLayoutContainer:
                Height: =60
                Width: =1200
                X: =42
                Y: =24
                ZIndex: =6

                nombre_unidad_contraparte_na_input As text:
                    BorderColor: =RGBA(255, 255, 255, 1)
                    BorderThickness: =0
                    Color: =RGBA(17, 61, 107, 1)
                    Default: =If(nueva_contraparte,contraparte_na.nombre_entidad_contraparte,contraparte.nombre_entidad_contraparte)
                    DisabledColor: =RGBA(111, 139, 167, 1)
                    DisplayMode: =DisplayMode.Disabled
                    Fill: =RGBA(241, 244, 255, 1)
                    FocusedBorderThickness: =0
                    HintText: =""
                    HoverBorderColor: =RGBA(255, 255, 255, 1)
                    HoverFill: =RGBA(241, 244, 255, 1)
                    MaxLength: =150
                    PaddingBottom: =12
                    PaddingLeft: =24
                    PaddingRight: =24
                    PaddingTop: =12
                    RadiusBottomLeft: =12
                    RadiusBottomRight: =12
                    RadiusTopLeft: =12
                    RadiusTopRight: =12
                    Size: =14
                    TabIndex: =
                    Width: =1200
                    Y: =20
                    ZIndex: =1

                nombre_unidad_contraparte_na_label As label:
                    Color: =RGBA(111, 139, 167, 1)
                    FontWeight: =FontWeight.Bold
                    Height: =20
                    PaddingBottom: =4
                    PaddingLeft: =12
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =10
                    Text: ="NOMBRE ENTIDAD CONTRAPARTE"
                    VerticalAlign: =VerticalAlign.Top
                    Width: =300
                    ZIndex: =2

        datos_entidad_contraparte_na As label:
            Color: =RGBA(17, 61, 107, 1)
            FontWeight: =FontWeight.Bold
            Height: =96
            PaddingBottom: =34
            PaddingLeft: =42
            PaddingRight: =0
            PaddingTop: =42
            Size: =20
            Text: ="Datos entidad contraparte nacional"
            Width: =1366
            ZIndex: =2

    lbl_falta_correo As label:
        Align: =Align.Right
        Color: =RGBA(238, 110, 126, 1)
        FontWeight: =FontWeight.Bold
        Height: =70
        Size: =9
        Text: ="Ingrese una dirección de correo válida."
        Visible: |-
            =If(correo_na_invalido && (IsMatch(TrimEnds(Lower(correo_electronico_na_input.Text)),
            "^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$") = false)
            ,true,false)
        Width: =676
        X: =608
        Y: =510
        ZIndex: =3

    lbl_faltan_datos_2 As label:
        Align: =Align.Right
        Color: =RGBA(238, 110, 126, 1)
        FontWeight: =FontWeight.Bold
        Height: =20
        PaddingRight: =90
        Size: =11
        Text: ="Debe completar los campos faltantes."
        Visible: =If((sin_nombre_representante_legal_na || sin_firma_na || sin_nombre_responsable_institucional_na || sin_cargo_na || correo_na_invalido || correo_na_vacio) && (IsBlank(nombre_representante_legal_na_input.Text) || CountRows(Split(Trim(nombre_representante_legal_na_input.Text),""))=0 || IsBlank(nombre_responsable_institucional_na_input.Text) || CountRows(Split(Trim(nombre_responsable_institucional_na_input.Text),""))=0 || IsBlank(cargo_responsable_institucional_na_input.Text) || CountRows(Split(Trim(cargo_responsable_institucional_na_input.Text),""))=0 || IsBlank(correo_electronico_na_input.Text) || IsBlank(firma_digiral_na_button)), true)
        Width: =676
        X: =690
        Y: =657
        ZIndex: =4

    BannerUdeC_3 As HeaderUdeC:
        Bienvenido: =If(persona_solicitante.sexo_social="F","Bienvenida,","Bienvenido,")
        Subtitulo: ="VINCULACIÓN CON EL MEDIO"
        Titulo: ="Solicitud de Tramitación de Convenios"
        ZIndex: =5

    lbl_campo_obligatorio_2 As label:
        Color: =RGBA(17, 61, 107, 1)
        FontWeight: =FontWeight.Semibold
        Height: =20
        PaddingLeft: =45
        Size: =11
        Text: ="*Campos obligatorios."
        Width: =856
        X: =42
        Y: =657
        ZIndex: =6

    contraparte_nacional_popup As groupContainer.manualLayoutContainer:
        Height: =Unidad_solicitante.Height
        Visible: =popup_contraparte_na
        Width: =Unidad_solicitante.Width
        ZIndex: =7

        fig_registro_5_popup_bg_2 As rectangle:
            BorderStyle: =BorderStyle.None
            Fill: =RGBA(0, 0, 0, 0.20)
            Height: =768
            Width: =1366
            ZIndex: =1

        fondo_blanco_4 As image:
            Height: =352
            Image: ='background-section'
            ImagePosition: =ImagePosition.Fill
            RadiusBottomLeft: =24
            RadiusBottomRight: =24
            RadiusTopLeft: =24
            RadiusTopRight: =24
            Width: =709
            X: =328
            Y: =208
            ZIndex: =2

        lbl_contraparte_na_popup_titulo As label:
            Color: =RGBA(17, 61, 107, 1)
            FontWeight: =FontWeight.Bold
            Size: =18
            Text: ="Búsqueda de contraparte nacional"
            Width: =650
            X: =360
            Y: =234
            ZIndex: =3

        inp_contraparte_na_popup_search As text:
            BorderColor: =RGBA(255, 255, 255, 1)
            BorderThickness: =0
            Color: =RGBA(17, 61, 107, 1)
            Default: |
                =If(mostrar_lista_persona_juridica,
                    If(desplegar_buscador_juridica,"",pj_seleccionada),
                    ""
                )
            DisabledColor: =RGBA(111, 139, 167, 1)
            Fill: =RGBA(241, 244, 255, 1)
            Height: =46
            HintText: ="Ingresar nombre o RUT sin puntos y con guion"
            HoverBorderColor: =RGBA(255, 255, 255, 1)
            HoverFill: =RGBA(241, 244, 255, 1)
            OnSelect: |
                =Set(pj_seleccionada,Blank());
                If(mostrar_lista_persona_juridica,
                    Reset(inp_contraparte_na_popup_search);
                    If(desplegar_buscador_juridica,
                        UpdateContext({desplegar_buscador_juridica:false}),
                        UpdateContext({desplegar_buscador_juridica:true})
                    )
                );
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =1
            Width: =645
            X: =360
            Y: =353
            ZIndex: =4

        buscar_4 As image:
            Height: =20
            Image: =ico_search
            Width: =20
            X: =970
            Y: =366
            ZIndex: =5

        lbl_contraparte_na_popup_rut As label:
            Color: =RGBA(111, 139, 167, 1)
            FontWeight: =FontWeight.Bold
            Size: =10
            Text: ="NOMBRE/RUT INSTITUCIÓN"
            Width: =450
            X: =360
            Y: =314
            ZIndex: =6

        btn_contraparte_na_popup_buscar As button:
            BorderThickness: =1
            Fill: =RGBA(247, 158, 64, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.4)
            OnSelect: |
                =UpdateContext({popup_faltarut:false, popup_institucionnoencontrada:false});
                UpdateContext({es_rut:false});
                UpdateContext({mostrar_lista_persona_juridica:false});
                UpdateContext({desplegar_buscador_juridica:false});
                UpdateContext({error_minimo_caracteres:false});
                Set(popup_na_ya_ingresada,false);
                
                If(
                    //con dígito verificador
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{2}.\d{3}.\d{3}-[a-z0-9]") ||
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{1}.\d{3}.\d{3}-[a-z0-9]") ||
                    IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)), "\d{2}\d{3}\d{3}-[a-z0-9]") ||
                    IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)), "\d{1}\d{3}\d{3}-[a-z0-9]") //||
                
                    //sin dígito verificador
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{2}.\d{3}.\d{3}") ||
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{1}.\d{3}.\d{3}") ||
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{2}\d{3}\d{3}") ||
                    //IsMatch(TrimEnds(Trim(inp_contraparte_na_popup_search.Text)); "\d{1}\d{3}\d{3}") 
                ,
                    UpdateContext({es_rut:true});
                    UpdateContext({cumple_minimo_caracteres:true})
                    ,
                    UpdateContext({es_rut:false});
                    If(Len(inp_contraparte_na_popup_search.Text)>=3,
                        UpdateContext({cumple_minimo_caracteres:true}),
                        UpdateContext({cumple_minimo_caracteres:false})
                    )
                );
                
                If(IsBlank(inp_contraparte_na_popup_search.Text)=false,
                //
                If(
                    !IsBlank(//busca si el rut ya ha sido ingresado
                        LookUp(
                            contrapartes_nacionales, 
                            Lower(rut_entidad_contraparte) = Lower(inp_contraparte_na_popup_search.Text)
                        )
                    )
                    ||
                    !IsBlank(//busca si el nombre ya ha sido ingresado
                        LookUp(
                            contrapartes_nacionales, 
                            Lower(nombre_entidad_contraparte) = Lower(inp_contraparte_na_popup_search.Text)
                        )
                    )
                    ,
                    Set(popup_na_ya_ingresada,true)
                ,
                    Set(cargando, true);
                    If(es_rut,
                        Set(persona_juridica,
                            'VRIM-PABuscarPersonaJurídicapornombreoRut'.Run(inp_contraparte_na_popup_search.Text,"Rut")
                        )
                    ,
                        If(cumple_minimo_caracteres,
                            Set(persona_juridica,
                                'VRIM-PABuscarPersonaJurídicapornombreoRut'.Run(inp_contraparte_na_popup_search.Text,"Nombre")
                            ),
                            UpdateContext({error_minimo_caracteres:true})
                        )
                    );
                
                    If(persona_juridica.status,//si encuentra la persona jurídica
                        Set(lista_persona_juridica,persona_juridica.data);
                        UpdateContext({mostrar_lista_persona_juridica:true});
                        UpdateContext({desplegar_buscador_juridica:true})
                    ,
                        If(!error_minimo_caracteres,
                            UpdateContext({popup_institucionnoencontrada:true})
                        )
                    );
                    
                    Set(cargando, false);
                );
                    ,
                    UpdateContext({popup_faltarut:true})
                )
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(249, 133, 11, 1)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =1
            Text: ="BUSCAR"
            Visible: =IsBlank(pj_seleccionada)
            X: =845+0
            Y: =488+0
            ZIndex: =7

        btn_contraparte_na_popup_cancelar As button:
            BorderColor: =RGBA(247, 158, 64, 1)
            Color: =RGBA(247, 158, 64, 1)
            Fill: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.1)
            OnSelect: =Navigate(Entidad_contraparte,ScreenTransition.Fade)
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(247, 158, 64, 1)
            PressedFill: =RGBA(247, 158, 64, 0.3)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            Text: ="CANCELAR"
            X: =653
            Y: =488
            ZIndex: =8

        lbl_contraparte_na_popup_noencontrado As label:
            Align: =Align.Center
            Color: =RGBA(238, 110, 126, 1)
            FontWeight: =FontWeight.Bold
            Size: =11
            Text: ="Institución no encontrada. Por favor intente nuevamente"
            Visible: =popup_institucionnoencontrada
            Width: =481
            X: =(fondo_blanco_4.X+fondo_blanco_4.Width/2)-Self.Width/2
            Y: =418
            ZIndex: =9

        lbl_contraparte_na_popup_faltandatos As label:
            Align: =Align.Center
            Color: =RGBA(238, 110, 126, 1)
            FontWeight: =FontWeight.Bold
            Size: =11
            Text: ="Ingresar nombre o RUT institución"
            Visible: =popup_faltarut
            Width: =540
            X: =(fondo_blanco_4.X+fondo_blanco_4.Width/2)-Self.Width/2
            Y: =418
            ZIndex: =10

        btn_registro_10_politica_1 As button:
            OnSelect: |
                =/*
                Set(nueva_solicitud_contraparte;true);;
                Set(contraparte_s;{
                    nombre:"";
                    rut: "";
                    dv: "";
                    pais: "";
                    tipo: "";
                    doc: ""
                });;
                Reset(att_attach_doc_sna);;
                Reset(nombre_solicitud_unidad_contraparte_na_input);;
                Reset(rut_solicitud_na_input);;
                Reset(dv_solicitud_na_input);;
                Navigate(Datos_solicitud_contraparte_nacional;ScreenTransition.Fade);;
                */
            Size: =14
            Text: ="SOLICITAR CONTRAPARTE"
            Visible: =false
            Width: =260
            X: =360
            Y: =488
            ZIndex: =11

        lbl_contraparte_na_existente_popup As label:
            Align: =Align.Center
            Color: =RGBA(238, 110, 126, 1)
            FontWeight: =FontWeight.Bold
            Size: =11
            Text: ="Institución ya registrada"
            Visible: =popup_na_ya_ingresada
            Width: =540
            X: =(fondo_blanco_4.X+fondo_blanco_4.Width/2)-Self.Width/2
            Y: =418+0
            ZIndex: =12

        formatos_permitidos_lb_6 As label:
            Color: =RGBA(111, 139, 167, 1)
            Height: =20
            Italic: =true
            PaddingLeft: =12
            Size: =10
            Text: ="Si la institución no es encontrada por nombre, digite su RUT sin puntos y con guion"
            Width: =620
            X: =374
            Y: =399
            ZIndex: =13

        Icon1_2 As icon.Help:
            Color: =RGBA(111, 139, 167, 1)
            Height: =15
            Icon: =Icon.Help
            Width: =15
            X: =365
            Y: =402
            ZIndex: =14

        btn_contraparte_na_popup_buscar_1 As button:
            BorderThickness: =1
            Fill: =RGBA(247, 158, 64, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.4)
            OnSelect: |-
                =Set(contraparte_na,pj_detalle);
                Set(popup_contraparte_na,false)
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(249, 133, 11, 1)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =1
            Text: ="ACEPTAR"
            Visible: =!IsBlank(pj_seleccionada)
            X: =845+0
            Y: =488+0
            ZIndex: =15

        lbl_contraparte_na_min_caracteres_popup As label:
            Align: =Align.Center
            Color: =RGBA(238, 110, 126, 1)
            FontWeight: =FontWeight.Bold
            Size: =11
            Text: ="Introduzca un mínimo de 3 caracteres"
            Visible: =error_minimo_caracteres && !lbl_contraparte_na_popup_faltandatos.Visible
            Width: =540
            X: =(fondo_blanco_4.X+fondo_blanco_4.Width/2)-Self.Width/2
            Y: =418+0
            ZIndex: =16

        Contenedor_persona_juridica As groupContainer.manualLayoutContainer:
            Visible: |-
                =//desplegar_buscador_a
                mostrar_lista_persona_juridica && desplegar_buscador_juridica
            Width: =620
            X: =371+0
            Y: =397+0
            ZIndex: =17

            opciones_persona_juridica As gallery.galleryVertical:
                DelayItemLoading: =true
                Height: =200
                Items: =Filter(lista_persona_juridica, inp_contraparte_na_popup_search.Text in razonSocial)
                Layout: =Layout.Vertical
                LoadingSpinner: =LoadingSpinner.Data
                OnSelect: |
                    =false
                TemplatePadding: =0
                TemplateSize: =50
                Width: =620
                WrapCount: =0
                ZIndex: =1

                fondo_celeste_14 As image:
                    BorderColor: =RGBA(255, 255, 255, 1)
                    Height: =52
                    HoverFill: =RGBA(186, 202, 226, 1)
                    Image: ='background-input'
                    ImagePosition: =ImagePosition.Fill
                    Width: =620
                    ZIndex: =1

                Label1_4 As label:
                    Color: =RGBA(17, 61, 107, 1)
                    DisabledFill: =RGBA(241, 244, 255, 1)
                    Height: =50
                    HoverColor: =RGBA(17, 61, 107, 1)
                    HoverFill: =RGBA(207, 210, 232, 1)
                    OnSelect: |-
                        =Select(Parent);
                        /*
                        
                        Set(a_seleccionada;ThisItem.nombre);;
                        
                        Set(autoridad_seleccionada;{
                            nombre: ThisItem.nombre;
                            cargo: ThisItem.cargo;
                            correo: ThisItem.correo;
                            telefono: ThisItem.telefono
                        })
                        */
                        If(desplegar_buscador_juridica,
                            UpdateContext({desplegar_buscador_juridica:false}),
                            UpdateContext({desplegar_buscador_juridica:true})
                        );
                        Set(pj_detalle,{
                            nombre_entidad_contraparte: ThisItem.razonSocial,
                            rut_entidad_contraparte: Text(ThisItem.rut),
                            dv_entidad_contraparte: ThisItem.dv,
                            nombre_representante_legal: "",
                            nombre_responsable_institucional:"",
                            cargo_responsable_institucional:"",
                            pais:"CHILE",
                            correo_responsable_institucional:"",
                            publica:ThisItem.publica,
                            tipo_empresa: "-",
                            comuna: "-",
                            tipo_contribuyente: "-",
                            rubro: "-",
                            actividad: "-",
                            //id: First(datos_contraparte).id;
                            firma_digital:""
                        });
                        Set(pj_seleccionada,ThisItem.razonSocial);
                        /*
                        
                        
                        
                        
                        
                        */
                    PaddingBottom: =0
                    PaddingLeft: =12
                    PaddingRight: =10
                    PaddingTop: =0
                    Size: =14
                    Text: =ThisItem.razonSocial
                    Width: =599
                    ZIndex: =3

    cont_loading_1 As group:
        Height: =5
        Width: =5
        X: =60
        Y: =60
        ZIndex: =8

        fig_registro_5_bg_1 As rectangle:
            BorderStyle: =BorderStyle.None
            Fill: =RGBA(0, 0, 0, 0.20)
            Height: =768
            Visible: =cargando
            Width: =1366
            ZIndex: =14

        img_loading_1 As image:
            Image: =loading
            Visible: =cargando
            X: =633
            Y: =334
            ZIndex: =15

    grp_eliminar_contraparte_na_popup As group:
        Height: =5
        Width: =5
        X: =60
        Y: =60
        ZIndex: =16

        fig_eliminar_popup_bg_10 As rectangle:
            BorderStyle: =BorderStyle.None
            Fill: =RGBA(0, 0, 0, 0.20)
            Height: =768
            Visible: =popup_eliminar_contraparte_na
            Width: =1366
            ZIndex: =8

        img_eliminar_popup_3 As image:
            Height: =352
            Image: ='background-section'
            ImagePosition: =ImagePosition.Fill
            RadiusBottomLeft: =24
            RadiusBottomRight: =24
            RadiusTopLeft: =24
            RadiusTopRight: =24
            Visible: =popup_eliminar_contraparte_na
            Width: =709
            X: =327
            Y: =208
            ZIndex: =9

        lbl_eliminar_popup_titulo_3 As label:
            Color: =RGBA(17, 61, 107, 1)
            FontWeight: =FontWeight.Bold
            Size: =18
            Text: ="ELIMINACIÓN CONTRAPARTE NACIONAL"
            Visible: =popup_eliminar_contraparte_na
            Width: =612
            X: =359
            Y: =234
            ZIndex: =10

        lbl_desea_eliminar_3 As label:
            Align: =Align.Center
            Color: =RGBA(17, 61, 107, 1)
            Height: =117
            Size: =14
            Text: |-
                ="La contraparte nacional seleccionada será eliminada
                ¿Desea continuar?"
            Visible: =popup_eliminar_contraparte_na
            Width: =645
            X: =359
            Y: =314
            ZIndex: =11

        btn_eliminar_popup_3 As button:
            BorderThickness: =1
            Fill: =RGBA(247, 158, 64, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.4)
            OnSelect: |-
                =Set(cargando,true);
                
                'Convenio-PAEliminarcontraparteregistrada'.Run(
                    "NACIONAL",
                    contraparte.id
                );
                Remove(
                    contrapartes_nacionales,
                    First(
                        Filter(
                            contrapartes_nacionales,
                            Lower(nombre_entidad_contraparte) = Lower(nombre_unidad_contraparte_na_input.Text)
                        )
                    )
                );
                Remove(
                    id_contrapartes_nacionales,
                    First(
                        Filter(
                            id_contrapartes_nacionales,
                            Lower(ID) = Lower(contraparte.id)
                        )
                    )
                );
                'Convenio-PAActualizaridlistasSharePointasociadas'.Run(
                    JSON(id_contrapartes_nacionales),
                    "contraparte nacional",
                    id_convenio
                );
                //Back(ScreenTransition.CoverRight);;
                
                UpdateContext({popup_eliminar_contraparte_na:false});
                Set(guardado,true);
                Set(cargando,false);
                Navigate(Entidad_contraparte, ScreenTransition.Fade);
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(249, 133, 11, 1)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =If(popup_confirmacion,1,-1)
            Text: ="ELIMINAR"
            Visible: =popup_eliminar_contraparte_na
            X: =844
            Y: =488
            ZIndex: =12

        btn_eliminar_popup_atras_6 As button:
            BorderColor: =RGBA(247, 158, 64, 1)
            Color: =RGBA(247, 158, 64, 1)
            Fill: =RGBA(255, 255, 255, 1)
            FontWeight: =FontWeight.Bold
            HoverBorderColor: =RGBA(247, 158, 64, 1)
            HoverColor: =RGBA(247, 158, 64, 1)
            HoverFill: =RGBA(247, 158, 64, 0.1)
            OnSelect: |-
                =UpdateContext({popup_eliminar_contraparte_na:false})
            PressedBorderColor: =RGBA(247, 158, 64, 1)
            PressedColor: =RGBA(247, 158, 64, 1)
            PressedFill: =RGBA(247, 158, 64, 0.3)
            RadiusBottomLeft: =12
            RadiusBottomRight: =12
            RadiusTopLeft: =12
            RadiusTopRight: =12
            Size: =14
            TabIndex: =If(popup_confirmacion,0,-1)
            Text: ="CANCELAR"
            Visible: =popup_eliminar_contraparte_na
            X: =652
            Y: =488
            ZIndex: =13

