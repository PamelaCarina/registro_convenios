App As appinfo:
    BackEnabled: =false
    OnStart: |-
        =//USUARIO LOGEADO
        //Set(persona_solicitante; 'VRIM-PATraedatosdeusuario'.Run(User().Email));;
        Set(persona_solicitante, 'VRIM-PATraedatosdeusuario'.Run("melissa@udec.cl"));
        
        //UNIDAD SOLICITANTE
        //ClearCollect(organismos_actividad;{'Codigo Reparticion':"aaaa";Reparticion:"Seleccionar..."});;
        Set(arraypersonaltest,persona_solicitante.'array organismo actividad');
        ClearCollect(organismos_actividad, SortByColumns(arraypersonaltest,"Reparticion"));
        //Collect(organismos_actividad;{'Codigo Reparticion': First(persona_solicitante.'array personal').'Codigo Reparticion';Reparticion:First(persona_solicitante.'array personal').Reparticion});;
        
        //¿Esto qué hace?
        Set(nueva_unidad_solicitante, false);
        
        //LISTAS DESPLEGABLES
        ClearCollect(datos,Listaespecificacionesconvenio.Run());
        
        //ClearCollect(lista_alcance;{id:"-";valor:"Seleccionar..."});;
        Set(a_t,First(datos).'alcance territorial');
        ClearCollect(lista_alcance,a_t);
        
        //ClearCollect(lista_tipologia;{id:"-";valor:"Seleccionar..."});;
        Set(t,First(datos).tipologia);
        ClearCollect(lista_tipologia,t);
        
        //ClearCollect(lista_tipo_solicitud;{id:"-";valor:"Seleccionar..."});;
        Set(t_s,First(datos).'tipo solicitud');
        ClearCollect(lista_tipo_solicitud,t_s);
        
        //ClearCollect(lista_modalidad;{id:"-";valor:"Seleccionar..."});;
        Set(m,First(datos).modalidad);
        ClearCollect(lista_modalidad,m);
        
        //NACIONALES
        Clear(contrapartes_nacionales);
        
        //INTERNACIONALES
        Clear(contrapartes_internacionales);
        
        //OBTENER AUTORIDAD SOLICITANTE
        Set(autoridad,'VRIM-PA-Traeaprobadordetrabajador'.Run(persona_solicitante.id_persona));
        Set(autoridad_solicitante,'VRIM-PATraedatosdeusuario'.Run(autoridad.correo_aprobador));
        
        //MENSAJES DE CAMPOS FALTANTES
        Set(msj_campo_faltante,"Debe completar el campo faltante.");
        Set(msj_campos_faltantes,"Debe completar los campos faltantes.");
        
        //opciones seleccionables política del convenio
        ClearCollect(dd_tipo,
            {
                valor: "Formación (pregrado, postgrado, formación permanente)",
                id: "formacion"
            },
            {
                valor: "Extensión Académica",
                id: "extension_academica"
            },
            {
                valor: "Extensión Cultural",
                id: "extension_cultural"
            },
            {
                valor: "Bidireccional",
                id: "bidireccional"
            },
            {
                valor: "Otra",
                id: "otra"
            }
        );
        
        ClearCollect(dd_sectores,
            {
                valor: "Público - Político",
                id: "publico_politico"
            },
            {
                valor: "Social Comunitario",
                id: "social_comunitario"
            },
            {
                valor: "Cultural",
                id: "cultural"
            },
            {
                valor: "Productivo",
                id: "productivo"
            },
            {
                valor: "Comunidad Universitaria",
                id: "comunidad_uni"
            }
        );
        
        ClearCollect(dd_ambito,
            {
                valor: "Extensión",
                id: "extension"
            },
            {
                valor: "Comunicaciones",
                id: "comunicaciones"
            },
            {
                valor: "Emprendimiento",
                id: "emprendimiento"
            },
            {
                valor: "Transferencia tecnológica",
                id: "transferencia_tecnologica"
            },
            {
                valor: "Asistencia técnica",
                id: "asistencia_tecnica"
            },
            {
                valor: "Interacción con red alumni",
                id: "red_alumni"
            },
            {
                valor: "Relaciones institucionales",
                id: "rel_institucionales"
            },
            {
                valor: "Relaciones internacionales",
                id: "rel_internacionales"
            },
            {
                valor: "Prácticas profesionales, pasantías estudiantiles y académicas",
                id: "practicas_pasantia"
            },
            {
                valor: "Servicios",
                id: "servicios"
            }
        );

    Host As hostControl.DefaultHostControlVariant:
        OnCancel: =false
        OnEdit: =false
        OnNew: =false
        OnSave: =false
        OnView: =false

